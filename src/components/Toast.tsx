import { useEffect, useState } from "react";

interface ToastProps {
    type?: "complete" | "warning" | "error";
    message: string;
    duration?: number;
    onClose?: () => void;
    className?: string;
}

export default function Toast({ type = "error", message, duration = 3000, onClose, className }: ToastProps) {
    const [isVisible, setIsVisible] = useState(true);

    useEffect(() => {
        const timer = setTimeout(() => {
            setIsVisible(false);
            onClose?.();
        }, duration);

        return () => clearTimeout(timer);
    }, [duration, onClose]);

    if (!isVisible) return null;

    return (
        <div
            className={`
                fixed bottom-5 left-1/2 -translate-x-1/2
                p-3 rounded-md border text-xsEmphasize
                animate-[slideUp_3s_ease-in-out_forwards]
                flex items-center justify-between
                w-[331px]
                ${type === "complete" && "bg-[#dde8e4] border-green"}
                ${type === "warning" && "bg-[#f5f1e9] border-yellow"}
                ${type === "error" && "bg-[#f2e2e2] border-red"}
                ${className}
            `}
        >
            <div
                className={`flex items-center gap-[9px] 
                    ${type === "complete" && "text-green"}
                    ${type === "warning" && "text-yellow"}
                    ${type === "error" && "text-red"}
                `}
            >
                {type === "complete" && <CompleteIcon />}
                {type === "warning" && <WarningIcon />}
                {type === "error" && <ErrorIcon />}
                {message}
            </div>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M19.281 18.2194C19.3507 18.289 19.406 18.3718 19.4437 18.4628C19.4814 18.5539 19.5008 18.6514 19.5008 18.75C19.5008 18.8485 19.4814 18.9461 19.4437 19.0372C19.406 19.1282 19.3507 19.2109 19.281 19.2806C19.2114 19.3503 19.1286 19.4056 19.0376 19.4433C18.9465 19.481 18.849 19.5004 18.7504 19.5004C18.6519 19.5004 18.5543 19.481 18.4632 19.4433C18.3722 19.4056 18.2895 19.3503 18.2198 19.2806L12.0004 13.0603L5.78104 19.2806C5.64031 19.4213 5.44944 19.5004 5.25042 19.5004C5.05139 19.5004 4.86052 19.4213 4.71979 19.2806C4.57906 19.1399 4.5 18.949 4.5 18.75C4.5 18.551 4.57906 18.3601 4.71979 18.2194L10.9401 12L4.71979 5.78061C4.57906 5.63988 4.5 5.44901 4.5 5.24999C4.5 5.05097 4.57906 4.8601 4.71979 4.71936C4.86052 4.57863 5.05139 4.49957 5.25042 4.49957C5.44944 4.49957 5.64031 4.57863 5.78104 4.71936L12.0004 10.9397L18.2198 4.71936C18.3605 4.57863 18.5514 4.49957 18.7504 4.49957C18.9494 4.49957 19.1403 4.57863 19.281 4.71936C19.4218 4.8601 19.5008 5.05097 19.5008 5.24999C19.5008 5.44901 19.4218 5.63988 19.281 5.78061L13.0607 12L19.281 18.2194Z"
                    fill={`${type === "complete" ? "#52bd94" : type === "warning" ? "#ffb020" : "#d14343"}`}
                />
            </svg>
        </div>
    );
}

const CompleteIcon = () => (
    <svg width="37" height="37" viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
            d="M18.5 3.46875C15.5271 3.46875 12.621 4.35032 10.1491 6.00197C7.67722 7.65363 5.75062 10.0012 4.61294 12.7478C3.47526 15.4944 3.17759 18.5167 3.75758 21.4325C4.33756 24.3482 5.76915 27.0265 7.87131 29.1287C9.97347 31.2309 12.6518 32.6624 15.5676 33.2424C18.4833 33.8224 21.5056 33.5247 24.2522 32.3871C26.9988 31.2494 29.3464 29.3228 30.998 26.8509C32.6497 24.379 33.5313 21.4729 33.5313 18.5C33.527 14.5148 31.9421 10.6939 29.1241 7.87595C26.3061 5.05795 22.4853 3.47296 18.5 3.46875ZM25.0993 15.8493L17.0056 23.943C16.8982 24.0506 16.7706 24.1358 16.6303 24.194C16.4899 24.2522 16.3395 24.2822 16.1875 24.2822C16.0356 24.2822 15.8851 24.2522 15.7447 24.194C15.6044 24.1358 15.4768 24.0506 15.3695 23.943L11.9007 20.4743C11.6837 20.2573 11.5619 19.9631 11.5619 19.6562C11.5619 19.3494 11.6837 19.0552 11.9007 18.8382C12.1177 18.6212 12.4119 18.4994 12.7188 18.4994C13.0256 18.4994 13.3198 18.6212 13.5368 18.8382L16.1875 21.4904L23.4632 14.2132C23.5706 14.1058 23.6982 14.0206 23.8385 13.9624C23.9789 13.9043 24.1293 13.8744 24.2813 13.8744C24.4332 13.8744 24.5836 13.9043 24.724 13.9624C24.8643 14.0206 24.9919 14.1058 25.0993 14.2132C25.2067 14.3206 25.2919 14.4482 25.3501 14.5885C25.4082 14.7289 25.4382 14.8793 25.4382 15.0312C25.4382 15.1832 25.4082 15.3336 25.3501 15.474C25.2919 15.6143 25.2067 15.7419 25.0993 15.8493Z"
            fill="#52BD94"
        />
    </svg>
);

const WarningIcon = () => (
    <svg width="37" height="37" viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
            d="M18.5 3.46875C15.5271 3.46875 12.621 4.35032 10.1491 6.00197C7.67722 7.65363 5.75062 10.0012 4.61294 12.7478C3.47526 15.4944 3.17759 18.5167 3.75758 21.4325C4.33756 24.3482 5.76915 27.0265 7.87131 29.1287C9.97347 31.2309 12.6518 32.6624 15.5676 33.2424C18.4833 33.8224 21.5056 33.5247 24.2522 32.3871C26.9988 31.2494 29.3464 29.3228 30.998 26.8509C32.6497 24.379 33.5313 21.4729 33.5313 18.5C33.527 14.5148 31.9421 10.6939 29.1241 7.87595C26.3061 5.05795 22.4853 3.47296 18.5 3.46875ZM18.5 31.2188C15.9845 31.2188 13.5254 30.4728 11.4338 29.0753C9.34226 27.6777 7.71207 25.6913 6.74941 23.3673C5.78676 21.0432 5.53489 18.4859 6.02564 16.0187C6.5164 13.5515 7.72774 11.2852 9.50649 9.50649C11.2852 7.72774 13.5515 6.51639 16.0187 6.02564C18.4859 5.53488 21.0432 5.78676 23.3673 6.74941C25.6913 7.71206 27.6777 9.34225 29.0753 11.4338C30.4728 13.5254 31.2188 15.9845 31.2188 18.5C31.2149 21.872 29.8737 25.1049 27.4893 27.4893C25.1049 29.8737 21.8721 31.2149 18.5 31.2188ZM17.3438 19.6562V11.5625C17.3438 11.2558 17.4656 10.9617 17.6824 10.7449C17.8993 10.5281 18.1934 10.4062 18.5 10.4062C18.8067 10.4062 19.1008 10.5281 19.3176 10.7449C19.5344 10.9617 19.6563 11.2558 19.6563 11.5625V19.6562C19.6563 19.9629 19.5344 20.257 19.3176 20.4738C19.1008 20.6907 18.8067 20.8125 18.5 20.8125C18.1934 20.8125 17.8993 20.6907 17.6824 20.4738C17.4656 20.257 17.3438 19.9629 17.3438 19.6562ZM20.2344 24.8594C20.2344 25.2024 20.1327 25.5377 19.9421 25.8229C19.7515 26.1082 19.4806 26.3305 19.1637 26.4617C18.8468 26.593 18.4981 26.6273 18.1616 26.5604C17.8252 26.4935 17.5162 26.3283 17.2736 26.0858C17.0311 25.8432 16.8659 25.5342 16.799 25.1977C16.732 24.8613 16.7664 24.5126 16.8977 24.1957C17.0289 23.8787 17.2512 23.6079 17.5364 23.4173C17.8217 23.2267 18.157 23.125 18.5 23.125C18.96 23.125 19.4011 23.3077 19.7264 23.633C20.0517 23.9582 20.2344 24.3994 20.2344 24.8594Z"
            fill="#FFB020"
        />
    </svg>
);

const ErrorIcon = () => (
    <svg width="37" height="37" viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
            d="M23.9431 14.693L20.1347 18.5L23.9431 22.307C24.0505 22.4144 24.1357 22.5419 24.1938 22.6823C24.252 22.8226 24.2819 22.9731 24.2819 23.125C24.2819 23.2769 24.252 23.4274 24.1938 23.5677C24.1357 23.7081 24.0505 23.8356 23.9431 23.943C23.8356 24.0505 23.7081 24.1357 23.5677 24.1938C23.4274 24.252 23.2769 24.2819 23.125 24.2819C22.9731 24.2819 22.8226 24.252 22.6823 24.1938C22.5419 24.1357 22.4144 24.0505 22.307 23.943L18.5 20.1346L14.6931 23.943C14.5856 24.0505 14.4581 24.1357 14.3177 24.1938C14.1774 24.252 14.0269 24.2819 13.875 24.2819C13.7231 24.2819 13.5726 24.252 13.4323 24.1938C13.2919 24.1357 13.1644 24.0505 13.057 23.943C12.9495 23.8356 12.8643 23.7081 12.8062 23.5677C12.748 23.4274 12.7181 23.2769 12.7181 23.125C12.7181 22.9731 12.748 22.8226 12.8062 22.6823C12.8643 22.5419 12.9495 22.4144 13.057 22.307L16.8654 18.5L13.057 14.693C12.84 14.4761 12.7181 14.1818 12.7181 13.875C12.7181 13.5682 12.84 13.2739 13.057 13.057C13.2739 12.84 13.5682 12.7181 13.875 12.7181C14.1818 12.7181 14.4761 12.84 14.6931 13.057L18.5 16.8654L22.307 13.057C22.4144 12.9495 22.5419 12.8643 22.6823 12.8062C22.8226 12.748 22.9731 12.7181 23.125 12.7181C23.2769 12.7181 23.4274 12.748 23.5677 12.8062C23.7081 12.8643 23.8356 12.9495 23.9431 13.057C24.0505 13.1644 24.1357 13.2919 24.1938 13.4323C24.252 13.5726 24.2819 13.7231 24.2819 13.875C24.2819 14.0269 24.252 14.1774 24.1938 14.3177C24.1357 14.4581 24.0505 14.5856 23.9431 14.693ZM33.5313 18.5C33.5313 21.4729 32.6497 24.379 30.998 26.8509C29.3464 29.3228 26.9988 31.2494 24.2522 32.3871C21.5056 33.5247 18.4833 33.8224 15.5676 33.2424C12.6518 32.6624 9.97347 31.2309 7.87131 29.1287C5.76915 27.0265 4.33756 24.3482 3.75758 21.4325C3.17759 18.5167 3.47526 15.4944 4.61294 12.7478C5.75062 10.0012 7.67722 7.65363 10.1491 6.00197C12.621 4.35032 15.5271 3.46875 18.5 3.46875C22.4853 3.47296 26.3061 5.05795 29.1241 7.87595C31.9421 10.6939 33.527 14.5148 33.5313 18.5ZM31.2188 18.5C31.2188 15.9845 30.4728 13.5254 29.0753 11.4338C27.6777 9.34225 25.6913 7.71206 23.3673 6.74941C21.0432 5.78676 18.4859 5.53488 16.0187 6.02564C13.5515 6.51639 11.2852 7.72774 9.50649 9.50649C7.72774 11.2852 6.5164 13.5515 6.02564 16.0187C5.53489 18.4859 5.78676 21.0432 6.74941 23.3673C7.71207 25.6913 9.34226 27.6777 11.4338 29.0753C13.5254 30.4728 15.9845 31.2188 18.5 31.2188C21.8721 31.2149 25.1049 29.8737 27.4893 27.4893C29.8737 25.1049 31.2149 21.872 31.2188 18.5Z"
            fill="#D14343"
        />
    </svg>
);
