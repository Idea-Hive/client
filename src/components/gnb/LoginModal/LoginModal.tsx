import { CloseBtn } from "@/components/icons/icons";
import Link from "next/link";
import EmailLoginForm from "./EmailLoginForm";
import SocialLoginForm from "./SocialLoginForm";

export default function LoginModal({ onClose, onOpenFindPwModal }: { onClose: () => void; onOpenFindPwModal: () => void }) {
    return (
        <div className="flex justify-center items-center w-screen h-screen fixed top-0 left-0 bg-gray-500 bg-opacity-40 overflow-hidden z-50">
            <div className="relative w-[420px] h-fit pb-10 bg-white shadow-xl mx-auto my-0 rounded-lg">
                <div className="flex justify-end mb-1.5 mt-5 px-5">
                    <CloseBtn onClose={onClose} />
                </div>
                <div className="px-[50px]">
                    <div className="flex justify-center items-center gap-[5px] mb-5">
                        <svg width="37" height="36" viewBox="0 0 37 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                opacity="0.2"
                                d="M16.3255 11.2296C16.3255 12.118 16.062 12.9865 15.5685 13.7252C15.0749 14.4639 14.3734 15.0396 13.5526 15.3796C12.7318 15.7195 11.8287 15.8085 10.9573 15.6352C10.086 15.4619 9.28563 15.034 8.65743 14.4059C8.02923 13.7777 7.60143 12.9773 7.42811 12.106C7.25479 11.2346 7.34374 10.3315 7.68372 9.51068C8.0237 8.68991 8.59943 7.98838 9.33811 7.49481C10.0768 7.00123 10.9452 6.73779 11.8336 6.73779C13.025 6.73779 14.1675 7.21104 15.0099 8.05342C15.8522 8.89581 16.3255 10.0383 16.3255 11.2296ZM25.3092 6.73779C24.4208 6.73779 23.5523 7.00123 22.8136 7.49481C22.075 7.98838 21.4992 8.68991 21.1593 9.51068C20.8193 10.3315 20.7303 11.2346 20.9036 12.106C21.077 12.9773 21.5048 13.7777 22.133 14.4059C22.7612 15.034 23.5615 15.4619 24.4329 15.6352C25.3042 15.8085 26.2074 15.7195 27.0281 15.3796C27.8489 15.0396 28.5504 14.4639 29.044 13.7252C29.5376 12.9865 29.801 12.118 29.801 11.2296C29.801 10.0383 29.3278 8.89581 28.4854 8.05342C27.643 7.21104 26.5005 6.73779 25.3092 6.73779ZM11.8336 20.2133C10.9452 20.2133 10.0768 20.4768 9.33811 20.9703C8.59943 21.4639 8.0237 22.1654 7.68372 22.9862C7.34374 23.807 7.25479 24.7102 7.42811 25.5815C7.60143 26.4528 8.02923 27.2532 8.65743 27.8814C9.28563 28.5096 10.086 28.9374 10.9573 29.1107C11.8287 29.284 12.7318 29.1951 13.5526 28.8551C14.3734 28.5151 15.0749 27.9394 15.5685 27.2007C16.062 26.462 16.3255 25.5936 16.3255 24.7052C16.3255 23.5139 15.8522 22.3713 15.0099 21.529C14.1675 20.6866 13.025 20.2133 11.8336 20.2133Z"
                                fill="#FF6363"
                            />
                            <path
                                d="M11.8336 5.61475C10.7231 5.61475 9.63749 5.94405 8.71414 6.56101C7.79079 7.17798 7.07113 8.05489 6.64615 9.08086C6.22118 10.1068 6.10999 11.2358 6.32664 12.3249C6.54329 13.4141 7.07805 14.4146 7.86329 15.1998C8.64854 15.9851 9.649 16.5198 10.7382 16.7365C11.8273 16.9531 12.9563 16.8419 13.9823 16.417C15.0082 15.992 15.8851 15.2723 16.5021 14.349C17.1191 13.4256 17.4484 12.3401 17.4484 11.2296C17.4484 9.74042 16.8568 8.31227 15.8038 7.25929C14.7508 6.20631 13.3227 5.61475 11.8336 5.61475ZM11.8336 14.5984C11.1673 14.5984 10.5159 14.4009 9.96191 14.0307C9.4079 13.6605 8.9761 13.1344 8.72112 12.5188C8.46613 11.9032 8.39942 11.2258 8.52941 10.5723C8.6594 9.91882 8.98025 9.31854 9.4514 8.84739C9.92255 8.37625 10.5228 8.05539 11.1763 7.9254C11.8298 7.79541 12.5072 7.86213 13.1228 8.11711C13.7384 8.3721 14.2645 8.80389 14.6347 9.3579C15.0049 9.91191 15.2024 10.5633 15.2024 11.2296C15.2024 12.123 14.8475 12.9799 14.2157 13.6117C13.5839 14.2435 12.727 14.5984 11.8336 14.5984ZM25.3091 16.8444C26.4196 16.8444 27.5052 16.5151 28.4285 15.8981C29.3519 15.2811 30.0715 14.4042 30.4965 13.3782C30.9215 12.3523 31.0327 11.2233 30.816 10.1342C30.5994 9.045 30.0646 8.04453 29.2794 7.25929C28.4941 6.47404 27.4937 5.93928 26.4045 5.72264C25.3153 5.50599 24.1864 5.61718 23.1604 6.04215C22.1344 6.46712 21.2575 7.18679 20.6406 8.11014C20.0236 9.03349 19.6943 10.1191 19.6943 11.2296C19.6943 12.7187 20.2858 14.1468 21.3388 15.1998C22.3918 16.2528 23.82 16.8444 25.3091 16.8444ZM25.3091 7.86067C25.9754 7.86067 26.6267 8.05825 27.1807 8.42843C27.7348 8.79861 28.1666 9.32476 28.4215 9.94034C28.6765 10.5559 28.7432 11.2333 28.6132 11.8868C28.4833 12.5403 28.1624 13.1406 27.6913 13.6117C27.2201 14.0829 26.6198 14.4037 25.9663 14.5337C25.3128 14.6637 24.6355 14.597 24.0199 14.342C23.4043 14.087 22.8781 13.6552 22.508 13.1012C22.1378 12.5472 21.9402 11.8959 21.9402 11.2296C21.9402 10.3361 22.2951 9.47918 22.9269 8.84739C23.5587 8.21561 24.4156 7.86067 25.3091 7.86067ZM11.8336 19.0903C10.7231 19.0903 9.63749 19.4196 8.71414 20.0365C7.79079 20.6535 7.07113 21.5304 6.64615 22.5564C6.22118 23.5824 6.10999 24.7113 6.32664 25.8005C6.54329 26.8897 7.07805 27.8901 7.86329 28.6754C8.64854 29.4606 9.649 29.9954 10.7382 30.212C11.8273 30.4287 12.9563 30.3175 13.9823 29.8925C15.0082 29.4675 15.8851 28.7479 16.5021 27.8245C17.1191 26.9012 17.4484 25.8156 17.4484 24.7051C17.4484 23.216 16.8568 21.7878 15.8038 20.7348C14.7508 19.6818 13.3227 19.0903 11.8336 19.0903ZM11.8336 28.074C11.1673 28.074 10.5159 27.8764 9.96191 27.5062C9.4079 27.136 8.9761 26.6099 8.72112 25.9943C8.46613 25.3787 8.39942 24.7014 8.52941 24.0479C8.6594 23.3944 8.98025 22.7941 9.4514 22.3229C9.92255 21.8518 10.5228 21.5309 11.1763 21.4009C11.8298 21.2709 12.5072 21.3377 13.1228 21.5926C13.7384 21.8476 14.2645 22.2794 14.6347 22.8334C15.0049 23.3874 15.2024 24.0388 15.2024 24.7051C15.2024 25.5986 14.8475 26.4555 14.2157 27.0873C13.5839 27.719 12.727 28.074 11.8336 28.074ZM30.9239 24.7051C30.9239 25.0029 30.8056 25.2885 30.595 25.4991C30.3844 25.7097 30.0988 25.8281 29.8009 25.8281H26.4321V29.1969C26.4321 29.4948 26.3137 29.7804 26.1031 29.991C25.8926 30.2016 25.6069 30.3199 25.3091 30.3199C25.0113 30.3199 24.7256 30.2016 24.515 29.991C24.3044 29.7804 24.1861 29.4948 24.1861 29.1969V25.8281H20.8172C20.5194 25.8281 20.2338 25.7097 20.0232 25.4991C19.8126 25.2885 19.6943 25.0029 19.6943 24.7051C19.6943 24.4073 19.8126 24.1216 20.0232 23.911C20.2338 23.7004 20.5194 23.5821 20.8172 23.5821H24.1861V20.2132C24.1861 19.9154 24.3044 19.6298 24.515 19.4192C24.7256 19.2086 25.0113 19.0903 25.3091 19.0903C25.6069 19.0903 25.8926 19.2086 26.1031 19.4192C26.3137 19.6298 26.4321 19.9154 26.4321 20.2132V23.5821H29.8009C30.0988 23.5821 30.3844 23.7004 30.595 23.911C30.8056 24.1216 30.9239 24.4073 30.9239 24.7051Z"
                                fill="#FF6363"
                            />
                        </svg>
                        <span className="text-n900 font-bold text-[27px] leading-[30px]">Taskmate</span>
                    </div>
                    <EmailLoginForm onClose={onClose} />
                    <LinkBtns onClose={onClose} onOpenFindPwModal={onOpenFindPwModal} />
                    <SocialLoginForm />
                </div>
            </div>
        </div>
    );
}

const LinkBtns = ({ onClose, onOpenFindPwModal }: { onClose: () => void; onOpenFindPwModal: () => void }) => {
    return (
        <div className="flex gap-2 justify-center mb-8">
            <Link
                href="/"
                className="text-sm text-n900"
                onClick={(e) => {
                    e.preventDefault();
                    onClose();
                    onOpenFindPwModal();
                }}
            >
                비밀번호 찾기
            </Link>
            <div className="text-n900 font-bold text-sm">ㅣ</div>
            <Link href="/signup" className="text-sm text-n900" onClick={onClose}>
                회원가입
            </Link>
        </div>
    );
};
